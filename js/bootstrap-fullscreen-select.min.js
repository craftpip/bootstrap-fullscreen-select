"use strict";
/*!
 * Bootstrap-fullscreen-select v1.5.1 (http://craftpip.github.io/bootstrap-fullscreen-select/)
 * Author: boniface pereira
 * Website: www.craftpip.com
 * Contact: hey@craftpip.com
 *
 * Copyright 2013-2014 bootstrap-select
 * Licensed under MIT (https://github.com/craftpip/bootstrap-fullscreen-select/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Mobileselect' requires jQuery");(function(e){e.fn.mobileSelect=function(i){var n=e(this);if(!n.length)return"no elements to process";if(i||(i={}),"string"!=typeof i)e.mobileSelect.defaults&&e.extend(e.fn.mobileSelect.defaults,e.mobileSelect.defaults),i=e.extend({},e.fn.mobileSelect.defaults,i),n.each(function(n,l){var a=e(l);if("SELECT"!==a[0].tagName)return console.warn("Sorry, cannot initialized a "+a[0].tagName+" element"),!0;if(void 0!==a.attr("data-msid"))return console.error("This element is already Initialized"),!0;var s=Math.floor(999999*Math.random());a.attr("data-msid",s);var o=new t(l,i);e.mobileSelect.elements[s]=o});else if("destroy"===i&&n.each(function(t,i){var n=e(i).attr("data-msid");e.mobileSelect.elements[n].destroy(),delete e.mobileSelect.elements[n]}),"sync"!==i&&"refresh"!==i||n.each(function(t,i){var n=e(i).attr("data-msid");e.mobileSelect.elements[n].refresh()}),"hide"===i&&n.each(function(t,i){var n=e(i).attr("data-msid");e.mobileSelect.elements[n].hide()}),"show"===i&&n.each(function(t,i){var n=e(i).attr("data-msid");e.mobileSelect.elements[n].show()}),"exists"===i){var l=!1;return e.each(e.mobileSelect.elements,function(e,t){t.$e[0]===n[0]&&(l=!0)}),l}};var t=function(t,i){this.$e=e(t),e.extend(this,i),this.init()};t.prototype={init:function(){this._setUserOptions(),this._extractOptions(),this._buildHTML(),this._bindEvents()},_buildHTML:function(){if(void 0===this.$e.attr("data-triggerOn")){void 0!==this.$e.attr("data-style")&&(this.style=this.$e.attr("data-style"));var t=this.$e.attr("disabled")||"";this.$e.before('<button type="button" class="btn '+this.style+' btn-mobileSelect-gen" '+t+'><span class="text"></span> <span class="caret"></span></button>'),this.$triggerElement=this.$e.prev(),this.$e.hide()}else this.$triggerElement=e(this.$e.attr("data-triggerOn"));this.$c=e('<div class="mobileSelect-container"></div>').addClass(this.theme).appendTo("body"),this.$c.html(this.filterable?e.fn.mobileSelect.defaults.templateFilterable:e.fn.mobileSelect.defaults.template),this.$c.children("div").css({"-webkit-transition":"all "+this.animationSpeed/1e3+"s",transition:"all "+this.animationSpeed/1e3+"s"}).css(this.padding).addClass("anim-"+this.animation),this.filterable?this.$c.find(".mobileSelect-selectallbtn").html(this.buttonSelectAll).end().find(".mobileSelect-savebtn").html(this.buttonSave).end().find(".mobileSelect-clearbtn").html(this.buttonClear).end().find(".mobileSelect-cancelbtn").html(this.buttonCancel).end():this.$c.find(".mobileSelect-title").html(this.title).end().find(".mobileSelect-selectallbtn").html(this.buttonSelectAll).end().find(".mobileSelect-savebtn").html(this.buttonSave).end().find(".mobileSelect-clearbtn").html(this.buttonClear).end().find(".mobileSelect-cancelbtn").html(this.buttonCancel).end(),this.$listcontainer=this.$c.find(".list-container"),this.isMultiple?this.$listcontainer.data("multiple","true"):this.$c.find(".mobileSelect-clearbtn").remove(),this._appendOptionsList()},_appendOptionsList:function(){this.$listcontainer.html("");var t=this,i="";e.each(this.options,function(n,l){if(l.group&&l.group!==i){if(l.groupDisabled)var a="disabled";t.$listcontainer.append('<div><button class="btn-link" data-toggle="collapse" style="width: 100%" data-target="#group'+l.group+'"><span class="mobileSelect-group" '+a+">"+l.group+'</span></button><div id="group'+l.group+'" class="collapse in"></div></div>'),i=l.group}if(l.groupDisabled||l.disabled)var a="disabled";l.group?t.$listcontainer.filter(e("#group"+l.group).append('<a href="#" class="mobileSelect-control" '+a+' data-value="'+l.value+'">'+l.text+"</a>")):t.$listcontainer.append('<a href="#" class="mobileSelect-control" '+a+' data-value="'+l.value+'">'+l.text+"</a>")}),this.sync(),this._updateBtnCount()},_updateBtnCount:function(){var e=this.$triggerElement.find(".text"),t=this.$e.val();return null===t?(e.html("Nothing selected"),!1):void(this.isMultiple?1===t.length?e.html(t):e.html(t.length+" items selected"):e.html(t))},_bindEvents:function(){var t=this;this.$triggerElement.on("click",function(e){e.preventDefault(),t.show()}),this.$c.find(".mobileSelect-selectallbtn").on("click",function(i){i.preventDefault(),t.$listcontainer.find(e(".mobileSelect-control")).filter(":visible").addClass("selected"),t.syncR(),e(window).trigger("mobileSelectAll")}),this.$c.find(".mobileSelect-savebtn").on("click",function(i){i.preventDefault(),t.syncR(),t.hide(),e(window).trigger("mobileSelectSave")}),this.$c.find(".mobileSelect-clearbtn").on("click",function(i){i.preventDefault(),t.$listcontainer.find(".selected").removeClass("selected"),t.syncR(),e(window).trigger("mobileSelectClear")}),this.$c.find(".mobileSelect-cancelbtn").on("click",function(i){i.preventDefault(),t.hide(),e(window).trigger("mobileSelectCancel")}),this.$c.find(".mobileSelect-filter").on("keyup",function(i){var n=e(this).val().toLowerCase();""===n?t.$listcontainer.find(e(".mobileSelect-control")).show():(t.$listcontainer.find(e(".mobileSelect-control")).hide(),e.each(t.$listcontainer.find(e(".mobileSelect-control")),function(t,i){e(i).text().toLowerCase().indexOf(n)>=0&&e(i).show()}))}),this.$c.find(".mobileSelect-control").on("click",function(i){i.preventDefault();var n=e(this);return"disabled"!=n.attr("disabled")&&void(t.isMultiple?n.toggleClass("selected"):n.siblings().removeClass("selected").end().addClass("selected"))})},_unbindEvents:function(){this.$triggerElement.unbind("click"),this.$c.find(".mobileSelect-clearbtn").unbind("click"),this.$c.find(".mobileSelect-cancelbtn").unbind("click"),this.$c.find(".mobileSelect-control").unbind("click")},sync:function(){var e=this.$e.val();this.isMultiple||(e=[e]),this.$c.find("a").removeClass("selected");for(var t in e)this.$c.find('a[data-value="'+e[t]+'"]').addClass("selected")},syncR:function(){var t=[];this.$c.find(".selected").each(function(){t.push(e(this).data("value"))}),this.$e.val(t)},hide:function(){this.$c.children("div").addClass("anim-"+this.animation);var t=this;this._updateBtnCount(),setTimeout(function(){t.$c.hide(),e("body").removeClass("mobileSelect-noscroll"),t.onClose.apply(t.$e)},this.animationSpeed)},show:function(){this.$c.show(),this.sync(),e("body").addClass("mobileSelect-noscroll");var t=this;setTimeout(function(){t.$c.children("div").removeClass(e.mobileSelect.animations.join(" "))},10),this.onOpen.apply(this.$e)},_setUserOptions:function(){this.isMultiple=!!this.$e.attr("multiple"),void 0!==this.$e.data("title")&&(this.title=this.$e.data("title")),void 0!==this.$e.data("animation")&&(this.animation=this.$e.data("animation")),void 0!==this.$e.data("animation-speed")&&(this.animationSpeed=this.$e.data("animation-speed")),void 0!==this.$e.data("padding")&&(this.padding=this.$e.data("padding")),void 0!==this.$e.data("btntext-save")&&(this.buttonSave=this.$e.data("btntext-save")),void 0!==this.$e.data("btntext-clear")&&(this.buttonClear=this.$e.data("btntext-clear")),void 0!==this.$e.data("btntext-cancel")&&(this.buttonCancel=this.$e.data("btntext-cancel")),void 0!==this.$e.data("theme")&&(this.theme=this.$e.data("theme")),"none"===this.animation&&(this.animationSpeed=0)},_extractOptions:function(){var t=[];e.each(this.$e.find("option"),function(i,n){var l=e(n);if(l.text()){if(l.parent().is("optgroup"))var a=l.parent().attr("label"),s=l.parent().prop("disabled");else var a=!1,s=!1;t.push({value:l.val(),text:e.trim(l.text()),disabled:l.prop("disabled"),group:a,groupDisabled:s})}}),this.options=t},destroy:function(){this.$e.removeAttr("data-msid"),this._unbindEvents(),this.$triggerElement.remove(),this.$c.remove(),this.$e.show(),console.log("done ")},refresh:function(){this._extractOptions(),this._appendOptionsList(),this._unbindEvents(),this._bindEvents()}},e.mobileSelect={elements:{},animations:["anim-top","anim-bottom","anim-left","anim-right","anim-opacity","anim-scale","anim-zoom","anim-none"]},e.fn.mobileSelect.defaults={template:'<div><div class="mobileSelect-title"></div><div class="list-container"></div><div class="mobileSelect-buttons"><a href="#" class="mobileSelect-selectallbtn"></a><a href="#" class="mobileSelect-savebtn"></a><a href="#" class="mobileSelect-clearbtn"></a><a href="#" class="mobileSelect-cancelbtn"></a></div></div>',templateFilterable:'<div><div class="mobileSelect-title"><div class="right-inner-addon"><i class="glyphicon glyphicon-search"></i><input class="form-control mobileSelect-filter" type="search" /></div></div><div class="list-container"></div><div class="mobileSelect-buttons"><a href="#" class="mobileSelect-selectallbtn"></a><a href="#" class="mobileSelect-savebtn"></a><a href="#" class="mobileSelect-clearbtn"></a><a href="#" class="mobileSelect-cancelbtn"></a></div></div>',title:"Select an option",buttonSelectAll:"Select All Visible",buttonSave:"Save",buttonClear:"Clear",buttonCancel:"Cancel",padding:{top:"20px",left:"20px",right:"20px",bottom:"20px"},animation:"scale",animationSpeed:400,theme:"white",onOpen:function(){},onClose:function(){},style:"btn-default",filterable:!1}})(jQuery);